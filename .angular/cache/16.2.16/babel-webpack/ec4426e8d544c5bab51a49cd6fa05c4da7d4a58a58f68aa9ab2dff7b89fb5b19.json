{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./book.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/form-field\";\nimport * as i5 from \"@angular/material/input\";\nimport * as i6 from \"../booklist/booklist.component\";\nfunction LibraryComponent_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 13);\n    i0.ɵɵelement(1, \"app-booklist\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const book_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"book\", book_r1);\n  }\n}\nlet LibraryComponent = /*#__PURE__*/(() => {\n  class LibraryComponent {\n    constructor(bookSvc) {\n      this.bookSvc = bookSvc;\n      this.books = [];\n      this.titleFilter = '';\n      this.priceFilter = null;\n      this.authorFilter = '';\n    }\n    ngOnInit() {\n      this.fetchBooks();\n    }\n    // Called on every filter change for live filtering\n    onFilterChange(title, author, price) {\n      this.titleFilter = title;\n      this.authorFilter = author;\n      this.priceFilter = price !== null && price !== undefined && price !== 0 ? Number(price) : null;\n      this.fetchBooks();\n    }\n    // Called on form submit (Search button)\n    onSearch() {\n      this.fetchBooks();\n    }\n    fetchBooks() {\n      this.bookSvc.getBooks(1, 10, this.titleFilter, this.priceFilter !== null ? this.priceFilter : undefined, this.authorFilter).subscribe({\n        next: books => {\n          this.books = books;\n        },\n        error: err => {\n          console.error('Book API error:', err);\n          this.books = [];\n        }\n      });\n    }\n    getBookList() {\n      return this.books || [];\n    }\n    static {\n      this.ɵfac = function LibraryComponent_Factory(t) {\n        return new (t || LibraryComponent)(i0.ɵɵdirectiveInject(i1.BookService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: LibraryComponent,\n        selectors: [[\"app-library\"]],\n        decls: 21,\n        vars: 4,\n        consts: [[1, \"container\"], [1, \"heading\"], [1, \"filter-forms\"], [1, \"title-field\"], [1, \"title-filter\"], [\"matInput\", \"\", \"name\", \"titleFilter\", \"placeholder\", \"Book Title\", 3, \"ngModel\", \"ngModelChange\"], [1, \"price-field\"], [1, \"price-filter\"], [\"matInput\", \"\", \"name\", \"priceFilter\", \"placeholder\", \"Price\", 3, \"ngModel\", \"ngModelChange\"], [1, \"author-field\"], [1, \"author-filter\"], [\"matInput\", \"\", \"name\", \"authorFilter\", \"placeholder\", \"Author Name\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"book\", 4, \"ngFor\", \"ngForOf\"], [1, \"book\"], [3, \"book\"]],\n        template: function LibraryComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n            i0.ɵɵtext(2, \"Book List\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"mat-form-field\", 4)(6, \"mat-label\");\n            i0.ɵɵtext(7, \"Book Title Filter\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"input\", 5);\n            i0.ɵɵlistener(\"ngModelChange\", function LibraryComponent_Template_input_ngModelChange_8_listener($event) {\n              return ctx.titleFilter = $event;\n            })(\"ngModelChange\", function LibraryComponent_Template_input_ngModelChange_8_listener() {\n              return ctx.onFilterChange(ctx.titleFilter, ctx.authorFilter, ctx.priceFilter);\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(9, \"div\", 6)(10, \"mat-form-field\", 7)(11, \"mat-label\");\n            i0.ɵɵtext(12, \"Price Filter\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"input\", 8);\n            i0.ɵɵlistener(\"ngModelChange\", function LibraryComponent_Template_input_ngModelChange_13_listener($event) {\n              return ctx.priceFilter = $event;\n            })(\"ngModelChange\", function LibraryComponent_Template_input_ngModelChange_13_listener() {\n              return ctx.onFilterChange(ctx.titleFilter, ctx.authorFilter, ctx.priceFilter);\n            });\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(14, \"div\", 9)(15, \"mat-form-field\", 10)(16, \"mat-label\");\n            i0.ɵɵtext(17, \"Author Filter\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"input\", 11);\n            i0.ɵɵlistener(\"ngModelChange\", function LibraryComponent_Template_input_ngModelChange_18_listener($event) {\n              return ctx.authorFilter = $event;\n            })(\"ngModelChange\", function LibraryComponent_Template_input_ngModelChange_18_listener() {\n              return ctx.onFilterChange(ctx.titleFilter, ctx.authorFilter, ctx.priceFilter);\n            });\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(19, \"ul\");\n            i0.ɵɵtemplate(20, LibraryComponent_li_20_Template, 2, 1, \"li\", 12);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngModel\", ctx.titleFilter);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngModel\", ctx.priceFilter);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngModel\", ctx.authorFilter);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.getBookList());\n          }\n        },\n        dependencies: [i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.MatFormField, i4.MatLabel, i5.MatInput, i6.BooklistComponent],\n        styles: [\".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:auto;margin:80px auto 0;padding:12px 14px;background:#f4f8ff;border-radius:12px;box-shadow:0 2px 16px #00000014;align-items:stretch}.heading[_ngcontent-%COMP%]{display:flex;font-size:1.5rem;font-weight:700;color:#234;margin-bottom:24px;letter-spacing:1px;text-align:center;justify-content:center;align-content:center}ul[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:70px;background-color:#fff;transition:box-shadow .2s,background .2s;justify-content:center;align-items:center;max-width:1120px;row-gap:10px}.book[_ngcontent-%COMP%]{margin-bottom:0;background:#eaf2fb;border-radius:6px;box-shadow:0 1px 4px #0000000a;transition:box-shadow .2s,background .2s;padding:0;width:270px;min-height:180px;display:flex;align-items:stretch}.book[_ngcontent-%COMP%]:hover{background:#d0e7fa;box-shadow:0 4px 16px #0000001a}.filter-forms[_ngcontent-%COMP%]{display:flex;gap:0px;align-items:center;flex-wrap:wrap;flex-direction:row;width:auto;min-width:600px;justify-content:space-evenly;border-radius:15px;margin-bottom:1px;padding:8px;background:#edf2fa}.filter-forms[_ngcontent-%COMP%]:hover{background-color:#b5d1fc;transition:background-color .5s}.title-filter-form[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap;width:100%}.title-field[_ngcontent-%COMP%], .price-field[_ngcontent-%COMP%], .author-field[_ngcontent-%COMP%]{flex:0 0 60px;min-width:20px;border:transparent #234}@media (max-width: 800px){.filter-forms[_ngcontent-%COMP%]{min-width:100%;flex-direction:column;align-items:stretch;gap:10px}.title-filter-form[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.title-field[_ngcontent-%COMP%], .price-field[_ngcontent-%COMP%], .author-field[_ngcontent-%COMP%]{min-width:120px;width:100%}}@media (max-width: 500px){.filter-forms[_ngcontent-%COMP%]{min-width:100%;padding:6px 2px}.title-field[_ngcontent-%COMP%], .price-field[_ngcontent-%COMP%], .author-field[_ngcontent-%COMP%]{min-width:80px;width:100%}}.mat-form-field[_ngcontent-%COMP%]{width:20%}@media (max-width: 500px){.ul[_ngcontent-%COMP%]{grid-template-columns:1fr}.title-field[_ngcontent-%COMP%], .price-field[_ngcontent-%COMP%], .author-field[_ngcontent-%COMP%]{min-width:150px}}\"]\n      });\n    }\n  }\n  return LibraryComponent;\n})();\nexport { LibraryComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}